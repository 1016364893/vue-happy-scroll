!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("element-resize-detector")):"function"==typeof define&&define.amd?define(["exports","element-resize-detector"],t):t(e["happy-scroll"]={},e.ElementResizeDetectorMaker)}(this,function(e,t){"use strict";function i(e,t,i){document.addEventListener?e.addEventListener(t,i):e.attachEvent("on"+t,i)}function s(e,t,i){document.addEventListener?e.removeEventListener(t,i):e.detachEvent("on"+t,i)}t=t&&t.hasOwnProperty("default")?t.default:t;const n=function(e){let t=Date.now();return function(i){if(i-t>(e||14))return t=i,!0}};var r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"stripContainer",staticClass:"happy-scroll-strip",class:[e.horizontal?"happy-scroll-strip--horizontal":"happy-scroll-strip--vertical"],style:[e.initLocation],on:{"!wheel":function(t){t.stopPropagation(),e.handlerWheel(t)}}},[i("div",{ref:"strip",staticClass:"scrollBar",style:[e.translate,e.initStrip,e.initSize,{background:e.color}],on:{mousedown:function(t){t.stopPropagation(),e.handlerMouseDown(t)}}})])},staticRenderFns:[],name:"happy-scroll-strip",props:{horizontal:Boolean,left:Boolean,top:Boolean,percentage:{type:Number,required:!0},move:{type:Number,default:0},size:{type:[Number,String],default:4},color:{type:String,default:"rgba(51,51,51,0.2)"},throttle:{type:Number,default:14}},data(){return{config:{},startMove:!1,binded:!1,length:0,moveThrottle:n(this.throttle)}},computed:{initSize(){return{[this.horizontal?"height":"width"]:this.size+"px"}},initStrip(){const e=this.$refs.stripContainer;if(!this.percentage&&!e)return;const t=e[this.config.client]*this.percentage;return this.length=t,{[this.config.sizeAttr]:`${t}px`}},translate(){let e=this.move*this.percentage;if(!this.$refs.stripContainer)return;const t=this.$refs.stripContainer.getBoundingClientRect()[this.config.sizeAttr]-this.length;return e<0&&(e=0),e>t&&(e=t),{transform:`${this.config.translate}(${e}px)`}},initLocation(){return this.horizontal?this.top?{top:0,bottom:"auto"}:"":this.left?{left:0,right:"auto"}:""}},methods:{bindEvents(){this.binded||(i(document,"mouseup",this.handlerMouseUp),i(document,"mousemove",this.handlerMove),this.binded=!0)},handlerMouseDown(e){this.startMove=!0,this.axis=e[this.config.clientAxis],this.bindEvents()},handlerMouseUp(){this.startMove=!1},handlerMove(e){if(!this.startMove||!this.moveThrottle(Date.now()))return;e.preventDefault(),e.stopImmediatePropagation();const t=this.$refs.stripContainer.getBoundingClientRect(),i=this.$refs.strip.getBoundingClientRect()[this.config.direction]-t[this.config.direction],s=e[this.config.clientAxis]-this.axis+i;this.axis=e[this.config.clientAxis],this.changeOffset(s)},handlerWheel(e){const t=this.$refs.stripContainer.getBoundingClientRect(),i=this.$refs.strip.getBoundingClientRect()[this.config.direction]-t[this.config.direction]+e[this.config.wheelDelta];this.changeOffset(i,e)},changeOffset(e,t){const i=this.$refs.stripContainer.getBoundingClientRect()[this.config.sizeAttr]-this.length;e<0&&(e=0),e>i&&(e=i),t&&0<e&&e<i&&(t.preventDefault(),t.stopImmediatePropagation()),this.$refs.strip.style.transform=`${this.config.translate}(${e}px)`,this.$emit("input",e)}},created(){const e={h:{sizeAttr:"width",client:"clientWidth",clientAxis:"clientX",translate:"translateX",direction:"left",wheelDelta:"deltaX"},v:{sizeAttr:"height",client:"clientHeight",clientAxis:"clientY",translate:"translateY",direction:"top",wheelDelta:"deltaY"}};this.config=this.horizontal?e.h:e.v},destroyed(){s(document,"mouseup",this.handlerClickUp),s(document,"mousemove",this.handlerMove)}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"happy-scroll",style:{width:e.width+"px",height:e.height+"px"}},[i("div",{ref:"container",staticClass:"happy-scroll-container",style:[e.initSize],on:{scroll:function(t){t.stopPropagation(),e.onScroll(t)}}},[e._t("default")],2),i("happy-scroll-strip",e._b({directives:[{name:"show",rawName:"v-show",value:!e.hideVertical&&e.percentageY<1,expression:"!hideVertical && percentageY < 1"}],attrs:{throttle:e.throttle,percentage:e.percentageY,move:e.moveY},model:{value:e.slideY,callback:function(t){e.slideY=t},expression:"slideY"}},"happy-scroll-strip",e.$attrs,!1)),i("happy-scroll-strip",e._b({directives:[{name:"show",rawName:"v-show",value:!e.hideHorizontal&&e.percentageX<1,expression:"!hideHorizontal && percentageX < 1"}],attrs:{horizontal:"",throttle:e.throttle,percentage:e.percentageX,move:e.moveX},model:{value:e.slideX,callback:function(t){e.slideX=t},expression:"slideX"}},"happy-scroll-strip",e.$attrs,!1))],1)},staticRenderFns:[],name:"happy-scroll",inheritAttrs:!1,props:{width:{type:Number,default:300},height:{type:Number,default:280},scrollTop:{type:[Number,String],default:0},scrollLeft:{type:[Number,String],default:0},hideVertical:Boolean,hideHorizontal:Boolean,throttle:{type:Number,default:14},resize:Boolean,smallerMove:{type:String,default:""},biggerMove:{type:String,default:""}},data(){return{percentageX:0,moveX:0,slideX:0,percentageY:0,moveY:+this.scrollTop,slideY:+this.scrollLeft,scrollThrottle:n()}},computed:{initSize(){return{width:this.width+15+"px",height:this.height+(!this.hideVertical&&this.percentageX<1?15:0)+"px"}}},watch:{slideX(){this.$refs.container.scrollLeft=this.slideX/this.percentageX},slideY(){this.$refs.container.scrollTop=this.slideY/this.percentageY},scrollTop(){this.moveY=+this.scrollTop},scrollLeft(){this.moveX=+this.scrollLeft}},methods:{onScroll(e){this.scrollThrottle(Date.now())&&(this.moveY=this.$refs.container.scrollTop,this.moveX=this.$refs.container.scrollLeft)},getPercentage(){this.percentageY=this.$refs.container.clientHeight/this.$refs.container.scrollHeight,this.percentageX=this.$refs.container.clientWidth/this.$refs.container.scrollWidth},resizeListener(){if(!this.resize)return;let e=0,i=0;t({strategy:"scroll",callOnAdd:!1}).listenTo(this.$slots.default[0].elm,t=>{this.getPercentage();let s;t.clientHeight<e&&(s=this.smallerMove.toLocaleLowerCase()),t.clientHeight>e&&(s=this.biggerMove.toLocaleLowerCase()),"start"===s&&(this.slideY=this.moveY=0),"end"===s&&(this.slideY=this.moveY=t.clientHeight),e=t.clientHeight,s="",t.clientWidth<i&&(s=this.smallerMove.toLocaleLowerCase()),t.clientWidth>i&&(s=this.biggerMove.toLocaleLowerCase()),"start"===s&&(this.slideX=this.moveX=0),"end"===s&&(this.slideX=this.moveX=t.clientHeight),i=t.clientWidth})}},components:{HappyScrollStrip:r},mounted(){this.getPercentage(),this.resizeListener()}};"undefined"!=typeof window&&window.Vue&&Vue.component("happy-scroll",o);var l={install(e){e.component("happy-scroll",o)},version:"1.1.0"};e.default=l,e.HappyScroll=o,e.version="1.1.0",Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=happy-scroll.min.js.map
